<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>CRTM Source Code</title>
  <meta http-equiv="Content-Style-Type" content="text/css">
  <script type="text/javascript">
    <!-- Hide script from old browsers
    var BName = navigator.appName;
    if (BName != "Microsoft Internet Explorer")  {
      document.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"http://cimss.ssec.wisc.edu/~paulv/StyleSheets/style.css\">")
    }
    else {
      document.write("<link rel=\"stylesheet\" type=\"text/css\" href=\"http://cimss.ssec.wisc.edu/~paulv/StyleSheets/IEstyle.css\">")
    }
    ; // -->
  </script>
</head>
<body>
<h1 class="main"><a name="TOP"></a>CRTM Source Code</h1>

<hr width="100%">



<!-- ======================================= -->
<h2><a name="UPDATE_NOTES"></a>Update Notes</h2>
<!-- ======================================= -->

<ul>
  <li><span style="color: red">05-Mar-2005</span>
  <ul>
    <li>Updated tarballs to include updates to SpcCoeff structure definition and
        I/O modules.
  </ul>
  <li>28-Mar-2005
  <ul>
    <li>Additions to the <tt>Atmosphere</tt> structure definition.
    <li>Updated <tt>Atmosphere</tt> I/O software. The <tt>Cloud</tt> and <tt>Aerosol</tt> data
        are now read/written using their own module functions to make it easier to splice in
        cloud and aerosol data for test data sets.
    <li>Updated the <tt>make.macros</tt> file with regular and optimised Lahey compiler options.
    <li>Added Linux compiler specific targets to the test code makefiles.
  </ul>
  <li>18-Feb-2005: First release.
</ul>



<!-- =========================================== -->
<h2><a name="DOWNLOAD_NOTES"></a>Download Notes</h2>
<!-- =========================================== -->

<ul>
  <li>The code requires a Fortran95 compiler.
  <li>Each program tarball contains all the required code, test
      datafiles, and a makefile for unix platforms. The makefile names in
      each program tarball are the same, so if you explode the tarballs in
      the same directory, rename them to prevent overwriting.
  <li>The datafiles are for </em>testing only</em>. They are not necessarily complete or consistent
      with one another. More useful test datafiles are being constructed.
  <li>All the required support code/modules are replicated in each
      tarball.  
  <li>All compilation macros and rules are defined in <tt>make.macros</tt>
      and <tt>make.rules</tt> respectively. The <tt>make.macros</tt> file
      contains the default compiler options for all the tested systems and
      some extra:
      <ul>
        <li>linux using Intel (v8.1.023)
        <li>linux using Lahey (v6.2c)
        <li>linux using g95 (Mar 20, 2005) [<a href="#1">1</a>]
        <li>linux using pgf90 (v5.2-4) [<a href="#2">2</a>]
        <li>SGI IRIX64 [<a href="#3">3</a>]
        <li>Sun Solaris  
        <li>IBM AIX  
      </ul>
      Simply typing <tt>make</tt> on the command line will select the
      correct platform. For linux systems, you should check the <tt>Linux_FLAGS</tt>
      macro definition in the <tt>make.macros</tt> file to determine the default compiler.
      <br><strong>Note:</strong> For the linux compilers, the following targets have also been
      defined in the makefile:
      <ul>
        <li><tt>intel</tt> - uses the Intel compiler with debug/info options.
        <li><tt>intel_opt</tt> - uses the Intel compiler with optimised options.
        <li><tt>lahey</tt> - uses the Lahey compiler with debug/info options.
        <li><tt>lahey_opt</tt> - uses the Lahey compiler with optimised options.
        <li><tt>g95</tt> - uses the g95 compiler.
      </ul>
      So, if you want to compile the code on a linux system using the g95 compiler, regardless of
      the <tt>Linux_FLAGS</tt> definition in the <tt>make.macros</tt> file, you can simply
      type,
      <br>&nbsp;&nbsp;&nbsp;<tt>make g95</tt><br>
      For the optimised Intel compile, you would type,
      <br>&nbsp;&nbsp;&nbsp;<tt>make intel_opt</tt><br>
  <li>All of the test data files are supplied in <em>big-endian</em> format. Most linux compilers have options to swap bytes on I/O. For those
      compilers with compile switches, you can use the <tt>EXTRA_FC_FLAGS</tt> macro on the
      command line. Other compilers have run time or environment variable options:
      <ul>
        <li>Intel. Add the compile option to the list during the make:
            <tt>make EXTRA_FC_FLAGS="-convert big_endian"</tt>
        <li>Lahey. Compile normally, but supply the switches <tt>-Wl,-T</tt> when you invoke
            the executable to perform byte-swapping on I/O
        <li>g95. Set the environment variable <tt>G95_ENDIAN</tt> to select the endian
            format to use for I/O of unformatted data. Values are <tt>BIG</tt>,
            <tt>LITTLE</tt> or <tt>NATIVE</tt>. Default is <tt>BIG</tt>.
        <li>PGI. Add the compile option to the list during the make: 
            <tt>make EXTRA_FC_FLAGS="-byteswapio"</tt>
      </ul>
  <li>Some of the test codes create netCDF output files.
      The netCDF I/O code requires the netCDF libraries and the Fortran90 API. You can get more
      information from my <a href="../netCDF/index.html" target="_blank">netCDF</a> page, or
      you can visit the
      <a href="http://my.unidata.ucar.edu/content/software/netcdf" target="_blank">Unidata netCDF</a>
      page to download and install the netCDF libraries.  
  <li>If you are compiling on a SunOS system, you must change the <tt>makefile</tt>
      include macro
      <br>&nbsp;&nbsp;&nbsp;<tt>INCLUDES = -I$(HOME)/local/netcdf/include</tt>
      <br>to
      <br>&nbsp;&nbsp;&nbsp;<tt>INCLUDES = -M$(HOME)/local/netcdf/include</tt>
      <br>The Sun compiler uses a different switch (<tt>-M</tt>) for including
      module interface files (the .mod ones).
</ul>

<ol class="count small">
  <li><a name="1"></a>
      The netCDF libraries compiled successfully with this g95 release. However
      some of my application test programs failed using the g95-compiled netCDF
      libraries where the Intel and Lahey generated libraries worked fine.
  <li><a name="2"></a>
      If you are using the PGI compiler, you must have at least v5.2-1,
      their Fortran95 compiler. However, this version of the compiler is
      buggy and will <em>not</em> compile all the source code. Fixes for
      the most egregious problems were fixed with the 5.2-4 release but there
      are still numerous compiler bugs that do not allow the code to be compiled.
  <li><a name="3"></a>
      If you are on an SGI, you may or may not be able to compile all the code.
      As far as I can tell SGI don't have their own f95 compiler -- but you can
      purchase SGI ports of the NAG f95 compiler. The SGI MIPSPro f90 compiler
      can handle most Fortran95 syntax, but not all. In particular, my SGI test
      platform had problems with name specifications on <tt>END INTERFACE</tt>
      statements but, strangely enough, only for defined operators not generic
      procedures. More seriously, it appears that the SGI MIPSPro f90 compiler
      accepts the use of the <tt>NULL</tt> intrinsic in derived type pointer 
      component initializations, but may not actually nullify the pointer. A
      compiler switch may force this behaviour, but I haven't tested it.
</ol>



<!-- =========================================== -->
<h2><a name="DOWNLOAD_LINKS"></a>Download Links</h2>
<!-- =========================================== -->

<ul>
  <li>User Interface Test programs. These programs don't actually do anything, but are provided
      as a simple template for testing developer modules. Currently, they <em>do not</em> require
      the netCDF API (see comment in Notes above).
  <ul>
    <li>CRTM Forward Model Test program: <a href="Test_Code/Forward/Test_Forward_software.tar.Z">Test_Forward_software.tar.Z</a>
    <li>CRTM Tangent-Linear Model Test program: <a href="Test_Code/Tangent_Linear/Test_Tangent_Linear_software.tar.Z">Test_Tangent_Linear_software.tar.Z</a>
    <li>CRTM Adjoint Model Test program: <a href="Test_Code/Adjoint/Test_Adjoint_software.tar.Z">Test_Adjoint_software.tar.Z</a>
    <li>CRTM K-Matrix Model Test program: <a href="Test_Code/K_Matrix/Test_K_Matrix_software.tar.Z">Test_K_Matrix_software.tar.Z</a>
  </ul>
  <li>Developer Interface Test programs (coming soon)
</ul>
<p>
 

<hr width="100%">
<address>This page maintained by <a href="mailto:paul.vandelst@ssec.wisc.edu?subject=CRTM Source Code">Paul van Delst</a></address>
<br>
Last updated $Date: 2005/04/25 21:45:08 $
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
<br><br><br><br><br><br><br><br><br><br>
</body>
</html>
