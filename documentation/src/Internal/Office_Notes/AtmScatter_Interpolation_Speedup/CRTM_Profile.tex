\section{CRTM ComponentTest Profile Results}
%===========================================

The CRTM ComponentTest test programs run the CRTM models for a variety of sensors (both microwave and infrared) and input profiles (including both cloud and aersol data in the input atmospheric profiles. These tests were run using both the baseline and modified cloud and aerosol optical property interpolation codes to determine what the timing changes would be for a complete model run. Currently only linux/gfortran test cases are available, but the results of the tests performed indicate that the modified interpolation code has no significant impact on the code speed.

The results of the forward/tangent-linear and tangent-linear/adjoint ComponentTest runs are shown in tables \ref{tab:fwdtl_test_gfortran} and \ref{tab:tlad_test_gfortran} respectively. In both cases the gas absorption and matrix inversion procedures (the latter used in the CRTM ADA RTSolution computation) were the most expensive procedures. Only those procedures that \emph{did not} call any child processes are shown. For example, the time spent in the \texttt{crtm\_rtsolution::crtm\_doubling\_layer} procedure was greater than that of \texttt{crtm\_utility::matinv} procedure, but the former calls the latter.

\subsection{Forward/Tangent-linear ComponentTest Profile Results}
%----------------------------------------------------------------

% Linux test

\begin{table}[ht]
  \centering
  \begin{tabular}{l *{2}{r@{.}l} c *{2}{r@{.}l} }
    \hline
                     & \multicolumn{4}{c}{\textbf{Baseline}} & \hspace{1.0em} & \multicolumn{4}{c}{\textbf{Modified}} \\
    \textbf{Routine} & \multicolumn{2}{c}{\textbf{\%}} & \multicolumn{2}{c}{\textbf{self time}} & & \multicolumn{2}{c}{\textbf{\%}} & \multicolumn{2}{c}{\textbf{self time}} \\
    \hline\hline
\texttt{crtm\_utility::matinv}                                 & 66&7 & 284849&04 & & 66&0 & 285413&03 \\ 
\texttt{crtm\_atmabsorption::crtm\_compute\_atmabsorption}     &  9&0 &  38424&78 & &  8&9 &  38527&22 \\
... & \multicolumn{2}{c}{...} & \multicolumn{2}{c}{...} & &  \multicolumn{2}{c}{...} & \multicolumn{2}{c}{...} \\ 
\texttt{crtm\_interpolation::interp\_1d}                       &  0&9 &   4009&04 & &  1&0 &   4356&03 \\
\texttt{crtm\_interpolation::interp\_1d\_tl}                   &  0&5 &   2059&62 & &  0&5 &   2232&06 \\
    \hline
  \end{tabular}
  \caption{gfortran CRTM Forward/Tangent-linear ComponentTest profile results comparing the most expensive routines with the two most expensive interpolation routines. The routine names are prefixed with their containing module name. All times in seconds.}
  \label{tab:fwdtl_test_gfortran}
\end{table}


\subsection{Tangent-linear/Adjoint ComponentTest Profile Results}
%----------------------------------------------------------------

% Linux test

\begin{table}[ht]
  \centering
  \begin{tabular}{l *{2}{r@{.}l} c *{2}{r@{.}l} }
    \hline
                     & \multicolumn{4}{c}{\textbf{Baseline}} & \hspace{1.0em} & \multicolumn{4}{c}{\textbf{Modified}} \\
    \textbf{Routine} & \multicolumn{2}{c}{\textbf{\%}} & \multicolumn{2}{c}{\textbf{self time}} & & \multicolumn{2}{c}{\textbf{\%}} & \multicolumn{2}{c}{\textbf{self time}} \\
    \hline\hline
\texttt{crtm\_atmabsorption::crtm\_compute\_atmabsorption}     & 19&5 & 618&28 & & 19&8 & 620&95 \\ 
\texttt{crtm\_utility::matinv}                                 & 11&3 & 359&16 & & 11&9 & 372&32 \\
... & \multicolumn{2}{c}{...} & \multicolumn{2}{c}{...} & &  \multicolumn{2}{c}{...} & \multicolumn{2}{c}{...} \\ 
\texttt{crtm\_interpolation::interp\_1d\_tl}                   &  2&1 &  67&15 & &  2&1 &  65&79 \\
\texttt{crtm\_interpolation::interp\_1d}                       &  1&8 &  57&65 & &  2&1 &  66&17 \\
    \hline
  \end{tabular}
  \caption{gfortran CRTM Tangent-linear/Adjoint ComponentTest profile results comparing the most expensive routines with the two most expensive interpolation routines. The routine names are prefixed with their containing module name. All times in seconds.}
  \label{tab:tlad_test_gfortran}
\end{table}


